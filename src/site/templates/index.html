{% extends "base.html" %}

{% block content %}
<section class="subscribe-section">
    <div class="subscribe-card">
        <h2>Subscribe to Updates</h2>
        <p>Get notified about new AI model deprecations as they're announced</p>
        <a href="{{ rss_feed_url }}" class="subscribe-button" target="_blank" rel="noopener">
            <svg class="rss-icon" viewBox="0 0 24 24" width="20" height="20">
                <path d="M3.429 5.1v2.4c7.248 0 13.114 5.886 13.114 13.142h2.4C18.943 12.18 11.862 5.1 3.429 5.1zm0 4.8v2.4a3.771 3.771 0 013.771 3.771h2.4c0-3.42-2.751-6.171-6.171-6.171zM6.171 15.486a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"/>
            </svg>
            Subscribe via RSS
        </a>
        <p class="subscribe-help">Copy this link to your RSS reader</p>
    </div>
</section>

<section class="status-section">
    <h2>Provider Status</h2>
    <div class="status-grid">
        {% for status in provider_statuses %}
        <div class="status-card">
            <span class="provider-name">{{ status.name }}</span>
            <span class="status-indicator {{ 'healthy' if status.is_healthy else 'error' }}">
                {% if status.is_healthy %}
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                    </svg>
                    Healthy
                {% else %}
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                    </svg>
                    Error
                {% endif %}
            </span>
            {% if not status.is_healthy and status.error_message %}
            <p class="error-message">{{ status.error_message }}</p>
            {% endif %}
            <p class="last-checked">Last checked: {{ status.last_checked.strftime('%Y-%m-%d %H:%M UTC') }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<section class="deprecations-section">
    <h2>Latest Deprecations</h2>
    {% if deprecations %}
        <div class="deprecations-list">
            {% for deprecation in deprecations %}
            <article class="deprecation-card">
                <header>
                    <h3>
                        <span class="provider-badge">{{ deprecation.provider }}</span>
                        {{ deprecation.model }}
                    </h3>
                </header>
                <div class="deprecation-details">
                    <div class="date-info">
                        <p><strong>Deprecation Date:</strong> {{ deprecation.deprecation_date.strftime('%Y-%m-%d') }}</p>
                        {% if deprecation.retirement_date %}
                        <p><strong>Retirement Date:</strong> {{ deprecation.retirement_date.strftime('%Y-%m-%d') }}</p>
                        {% endif %}
                    </div>
                    {% if deprecation.replacement %}
                    <p class="replacement">
                        <strong>Replacement:</strong> 
                        <span class="model-name">{{ deprecation.replacement }}</span>
                    </p>
                    {% endif %}
                    {% if deprecation.notes %}
                    <p class="notes">{{ deprecation.notes }}</p>
                    {% endif %}
                    {% if deprecation.url %}
                    <a href="{{ deprecation.url }}" class="announcement-link" target="_blank" rel="noopener">
                        View Announcement â†’
                    </a>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>No deprecations to display yet. Check back soon!</p>
        </div>
    {% endif %}
</section>

<section class="update-info">
    <p class="last-update">Last updated: {{ last_updated.strftime('%Y-%m-%d %H:%M UTC') }}</p>
</section>
{% endblock %}